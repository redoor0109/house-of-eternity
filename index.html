<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ì˜ì›ì˜ ì§‘ : ì‚¬ë¼ì§€ëŠ” ê²ƒë“¤ì„ ìœ„í•œ ì˜ì›í•œ ê¸°ë¡</title>

<style>
:root{
  --bg:#000;
  --fg:#fff;
  --muted:rgba(255,255,255,.6);
  --line:rgba(255,255,255,.18);
  --radius:12px;
  --max:900px;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background:var(--bg);
  color:var(--fg);
  font-family:-apple-system,BlinkMacSystemFont,"Noto Sans KR",system-ui,sans-serif;
  line-height:1.6;
}

a{color:var(--fg);text-decoration:none}
a:hover{ text-decoration: underline; text-underline-offset: 3px; }

.container{
  width:min(var(--max),calc(100% - 32px));
  margin:0 auto;
}

h1{font-size:38px;letter-spacing:.12em;margin:0}
h2{font-size:22px;letter-spacing:.08em;margin:0}
p{margin:0}
@media(max-width:640px){ h1{font-size:34px;} }

/* Views */
.view{ display:none; min-height: calc(100vh - 24px); }
.view.is-active{ display:block; }

/* Fade transition helper */
.fade{ opacity:0; transform: translateY(6px); transition: opacity .25s ease, transform .25s ease; }
.view.is-active .fade{ opacity:1; transform: translateY(0); }

/* Flash overlay (for gate transition) */
.flash{
  position:fixed;
  inset:0;
  background:#000;
  opacity:0;
  pointer-events:none;
  z-index:999;
  transition: opacity .12s linear;
}
.flash.is-on{ opacity:1; }

/* Entrance hero */
.hero{
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:26px;
  margin: 0 auto;
}

.hero-copy{
  display:flex;
  flex-direction:column;
  gap:10px;
  align-items:center;
}

.hero-q{
  font-size: 14px;
  letter-spacing: .06em;
  color: var(--muted);
  text-align:center;
}

.hero-sub{
  font-size: 13px;
  letter-spacing: .08em;
  color: var(--fg);
  opacity:.9;
}

.divider{
  width: 160px;
  height: 1px;
  background: var(--line);
  margin-top: 10px;
}

/* Gate */
.entrance{ padding-top: 0; text-align:center; }
.gate-wrap{
  margin-top: 120px;
  display:flex;
  justify-content:center;
}
.gate-frame{
  width: 200px;
  height: 320px;
  border:1px solid var(--line);
  display:flex;
  align-items:flex-end;
  justify-content:center;
  position: relative;
}

/* Door */
.gate-door{
  width: 160px;
  height: 260px;
  margin-bottom: 20px;
  background: var(--fg);
  cursor:pointer;
  position: relative;
  transform-origin: left center;
  transition: transform .6s ease;
}
.gate-door:hover{ transform: perspective(900px) rotateY(-6deg); }

/* When opening */
body.gate-open .gate-door{ transform: perspective(900px) rotateY(-72deg); }

/* Handle */
.gate-handle{
  position:absolute;
  right: 22px;
  top: 50%;
  width: 10px;
  height: 10px;
  border: 2px solid rgba(0,0,0,.85);
  border-radius: 50%;
  transform: translateY(-50%);
}

/* Light glow from the gap */
.gate-glow{
  position:absolute;
  left: -2px;
  top: 0;
  bottom: 0;
  width: 6px;
  background: linear-gradient(to right, rgba(255,255,255,0.55), rgba(255,255,255,0.0));
  opacity: 0.15;
  transition: opacity .25s ease, width .6s ease;
}
body.gate-open .gate-glow{ opacity: 0.9; width: 22px; }

/* Hall */
.hall{ padding-top: 72px; text-align:center; }
.hall-frame{ max-width: 420px; margin: 0 auto; padding: 12px 20px 24px; border: none; }

/* Door grid (mobile-first) */
.door-row{
  display:grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 12px; /* mobile tighter spacing */
}

/* Base door tile */
.door{
  position:relative;
  border:1px solid var(--line);
  padding:0;
  height:250px; /* mobile-optimized height */
  cursor:pointer;
  transition: transform .2s ease, border-color .2s ease;
  background:var(--fg);
  color:#000;
  overflow:hidden;
}

.door .label{
  position:absolute;
  top:28px;
  left:0; right:0;
  text-align:center;
  font-size:13px;
  letter-spacing:.12em;
  z-index:3;
}

.door .handle{
  position:absolute;
  right:18px;
  top:50%;
  width:10px;
  height:10px;
  border:1.5px solid rgba(0,0,0,.8);
  border-radius:50%;
  transform:translateY(-50%);
  z-index:3;
}

.program-door:nth-child(even) .handle{
  right: auto;
  left: 18px;
}

.door:hover{ transform:translateY(-2px); border-color:#000; }

/* Program: door leaf rotates fully, content sits BEHIND */
.program-door{ background: transparent; }

.program-door .door-back{
  position:absolute;
  inset:0;
  background:#fff;
  color:#000;
  padding:30px 8px 14px;
  opacity:0;
  pointer-events:none;
  transition: opacity .25s ease .35s;
  z-index:1;
  font-size: 13px;
}

.program-door .door-back strong{
  font-size: 16px;
  font-weight: 600;
}

.program-door .door-leaf{
  position:absolute;
  inset:0;
  background:#fff;
  transition: transform .8s ease;
  z-index:2;
}

.block a{
  color: #394DD4;         
}

/* LEFT column doors: hinge on LEFT, open to the LEFT */
.program-door:nth-child(odd) .door-leaf{ transform-origin: left center; }
.program-door:nth-child(odd).is-open .door-leaf{ transform: perspective(1200px) rotateY(-120deg); }

/* RIGHT column doors: hinge on RIGHT, open to the RIGHT */
.program-door:nth-child(even) .door-leaf{ transform-origin: right center; }
.program-door:nth-child(even).is-open .door-leaf{ transform: perspective(1200px) rotateY(120deg); }

/* Reveal content only when opened */
.program-door.is-open .door-back{ opacity:1; pointer-events:auto; }

/* Rooms */
.room{ padding-top: 60px; }
.room-head{ margin-bottom: 30px; display:flex; justify-content:space-between; align-items:baseline; gap: 12px; }
.hint{ font-size:12px; color: var(--muted); }

.info-grid{ display:grid; grid-template-columns:repeat(2,1fr); gap:24px; }
@media(max-width:640px){ .info-grid{grid-template-columns:1fr} }
.block h3{ font-size:12px; letter-spacing:.1em; margin:0 0 6px; }
.block p{ color:var(--muted) }
.note{ margin-top:32px; padding-top:24px; border-top:1px solid var(--line); color:var(--muted); }

footer{ padding:48px 0 96px; border-top:1px solid var(--line); text-align:center; color:var(--muted); }

/* Corridor */
.corridor{
  position:fixed;
  left:0;right:0;bottom:0;
  background: var(--bg);
  border-top:1px solid var(--line);
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:12px 16px;
}
.corridor button{
  background:none;
  border:1px solid var(--line);
  color: var(--fg);
  width:44px;height:44px;
  border-radius:50%;
  cursor:pointer;
}
.corridor .where{ font-size:12px; color:var(--muted); letter-spacing:.08em; }
</style>
</head>

<body>
<div class="flash" id="flash" aria-hidden="true"></div>

<div class="container">

  <!-- VIEW: Entrance (gate) -->
  <main class="view is-active" id="view-entrance" data-view>
    <section class="entrance" aria-label="ì˜ì›ì˜ ì§‘ ì…êµ¬">
      <div class="hero fade">
        <div class="gate-wrap">
          <div class="gate-frame">
            <div class="gate-door" id="gateDoor" role="button" tabindex="0" aria-label="ëŒ€ë¬¸ ì—´ê¸°">
              <div class="gate-handle"></div>
              <div class="gate-glow"></div>
            </div>
          </div>
        </div>

        <div class="hero-copy">
          <div class="hero-q">ì˜ì›ì˜ ì§‘ìœ¼ë¡œ ë“¤ì–´ê°€ì‹œê² ìŠµë‹ˆê¹Œ?</div>
          <div class="hero-sub">ë¬¸ì„ ì—´ì–´ì£¼ì„¸ìš”.</div>
          <div class="divider" aria-hidden="true"></div>
        </div>
      </div>
    </section>
  </main>

  <!-- VIEW: Hall (4 doors) -->
  <main class="view" id="view-hall" data-view>
    <section class="hall" aria-label="ì˜ì›ì˜ ì§‘">
      <div class="hall-frame fade">
        <h1 style="font-size:20px; letter-spacing:.10em; margin-bottom:32px; margin-top:-56px;">HOUSE OF ETERNITY</h1>

        <div class="door-row" aria-label="ë¬¸ ì„ íƒ">
          <div class="door" role="button" tabindex="0" data-route="#/info">
            <span class="label">INFORMATION</span>
            <span class="handle"></span>
          </div>
          <div class="door" role="button" tabindex="0" data-route="#/perks">
            <span class="label">NOTICE</span>
            <span class="handle"></span>
          </div>
          <div class="door" role="button" tabindex="0" data-route="#/program">
            <span class="label">PROGRAM</span>
            <span class="handle"></span>
          </div>
          <div class="door" role="button" tabindex="0" data-route="#/faq">
            <span class="label">Q&A</span>
            <span class="handle"></span>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- VIEW: Room - Info -->
  <main class="view" id="view-info" data-view>
    <section class="room" aria-label="ìš´ì˜ ì•ˆë‚´">
      <div class="fade">
        <div class="room-head">
          <h1>ì´ë²¤íŠ¸ ì¹´í˜ ì•ˆë‚´</h1>
          <p class="hint">ë¸”ë£¨ë¡œê·¸ in í•©ì •</p>
        </div>

        <div class="info-grid">
          <div class="block">
            <h2>ìš´ì˜ ì‹œê°„</h2>
            <p>26.01.09(ê¸ˆ) 12:00 â€“ 20:00<br>
            26.01.10(í† ) 12:00 - 17:00</p>
          </div>
          <div class="block">
            <h2>ìœ„ì¹˜</h2>
            <p>ì„œìš¸ ë§ˆí¬êµ¬ í† ì •ë¡œ 27-1 3ì¸µ<br>
            <a href="https://naver.me/5xjp0QW3">ë¸”ë£¨ë¡œê·¸ ë„¤ì´ë²„ì§€ë„</a></p>
          </div>
          <div class="block">
            <h2>ì˜¤ì‹œëŠ” ê¸¸</h2>
            <p>í•©ì •ì—­ 7ë²ˆ ì¶œêµ¬ ë„ë³´ 6ë¶„</p>
          </div>
          <div class="block">
            <h2>ëª¨ë“  ë¬¸ì˜</h2>
            <p>ì¸ìŠ¤íƒ€ê·¸ë¨, X<br> 
               @redoor_eventeam</p>
          </div>
        </div>

        <p class="note">
          <h3>ì¹´í˜ ê¸°ë³¸ ê³µì§€</h3>
          <p class="lead" style="margin-top:12px; margin-bottom:12px; color: var(--muted);">
          ê¸ˆìš”ì¼, í† ìš”ì¼ ìš´ì˜ì‹œê°„ì´ ë‹¤ë¦…ë‹ˆë‹¤.<br>
          ì£¼ì°¨ëŠ” ë¶ˆê°€í•©ë‹ˆë‹¤. ëŒ€ì¤‘êµí†µì„ ì´ìš©í•´ì£¼ì„¸ìš”.<br>
          1ì¸ 1ë©”ë‰´ í•„ìˆ˜ì…ë‹ˆë‹¤. ë¯¸êµ¬ë§¤ì‹œ ì…ì¥ ì œí•œ ìˆìŠµë‹ˆë‹¤.<br>
          ë°˜ë“œì‹œ ëª¨ë“  ë¬¸ì˜ëŠ” ì¹´í˜ê°€ ì•„ë‹Œ, Xì™€ ì¸ìŠ¤íƒ€ê·¸ë¨ (@redoor_eventeam)ìœ¼ë¡œ DM ë¶€íƒë“œë¦½ë‹ˆë‹¤.<br><br><p>
          <h3>ì¹´í˜ ì¤„ì„œê¸° ì•ˆë‚´</h3>
          <p class="lead" style="margin-top:12px; margin-bottom:12px; color: var(--muted);">
          ì˜¤í”ˆ ì „ ì¥ì‹œê°„ ëŒ€ê¸°ëŠ” ì‚¼ê°€í•´ì£¼ì„¸ìš”.<br>
          ì¤„ì„œëŠ” ë°©ë²•ì— ëŒ€í•œ ì•ˆë‚´ëŠ” í–‰ì‚¬ ì§ì „ ê³µì§€í•©ë‹ˆë‹¤.<br>
        </p>
      </div>
    </section>
  </main>

  <!-- VIEW: Room - Program -->
  <main class="view" id="view-program" data-view>
    <section class="room" aria-label="í”„ë¡œê·¸ë¨">
      <div class="fade">
        <div class="room-head">
          <h1>í”„ë¡œê·¸ë¨</h1>
          <p class="hint">ëˆŒëŸ¬ì„œ ì—´ê¸°/ë‹«ê¸°</p>
        </div>

        <div class="door-row" aria-label="í”„ë¡œê·¸ë¨ ë¬¸">
          <div class="door program-door" role="button" tabindex="0" aria-label="í”„ë¡œê·¸ë¨ A ì—´ê¸°" aria-expanded="false">
            <div class="door-back">
              <p><strong>ë¦¬ë„ì–´ ê³ ì‚¬</strong></p>
              <p style="margin-top:10px; color: rgba(0,0,0,.72);">ê¸°ì¤€ì  ì´ìƒ ë°›ì„ ì‹œ, ì„ ë¬¼ ì¦ì •</p>
            </div>
            <div class="door-leaf" aria-hidden="true">
              <span class="handle"></span>
            </div>
          </div>

          <div class="door program-door" role="button" tabindex="0" aria-label="í”„ë¡œê·¸ë¨ B ì—´ê¸°" aria-expanded="false">
            <div class="door-back">
              <p><strong>ë¦¬ë„ì–´ ë„¤ì»·</strong></p>
              <p style="margin-top:10px; color: rgba(0,0,0,.72);">ë¦¬ë„ì–´ì™€ í•¨ê»˜í•˜ëŠ” ë„¤ì»· í”„ë ˆì„<br>
                  ìì²´ì œì‘í•œ í”„ë ˆì„ì´ ì¤€ë¹„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.<br>
                  ê¸°ë… ì´¬ì˜í•˜ê³  ê°€ì„¸ìš” ğŸ“¸ <br>
                  ë³„ë„ì˜ ì¸í™”ëŠ” ì—†ìŠµë‹ˆë‹¤.<br> ì‚¬ì§„ ì°ê³  í°ì— ì €ì¥í•´ ê°€ì„¸ìš”â˜†</p>
            </div>
            <div class="door-leaf" aria-hidden="true">
              <span class="handle"></span>
            </div>
          </div>

          <div class="door program-door" role="button" tabindex="0" aria-label="í”„ë¡œê·¸ë¨ C ì—´ê¸°" aria-expanded="false">
            <div class="door-back">
              <p><strong>ë°©ëª…ë¡</strong></p>
              <p style="margin-top:10px; color: rgba(0,0,0,.72);">ì¹´í˜ ë‚´ ì¤€ë¹„ëœ íì•Œì½”ë“œë¥¼ ì°ìœ¼ë©´ ëª¨ë‘ê°€ ë³¼ ìˆ˜ ìˆëŠ” ë°©ëª…ë¡ì´ ë‚˜ì˜µë‹ˆë‹¤.<br>
                  p.s ë¦¬ë‘¥ì´ì˜ ë†€ì´í„°</p>
            </div>
            <div class="door-leaf" aria-hidden="true">
              <span class="handle"></span>
            </div>
          </div>

          <div class="door program-door" role="button" tabindex="0" aria-label="í”„ë¡œê·¸ë¨ D ì—´ê¸°" aria-expanded="false">
            <div class="door-back">
              <p><strong>???</strong></p>
              <p style="margin-top:10px; color: rgba(0,0,0,.72);">???</p>
            </div>
            <div class="door-leaf" aria-hidden="true">
              <span class="label">???</span>
              <span class="handle"></span>
            </div>
          </div> 
        </div>
      </div>
    </section>
  </main>

  <!-- VIEW: Room - notice -->
  <main class="view" id="view-perks" data-view>
    <section class="room" aria-label="íŠ¹ì „">
      <div class="fade">
        <h1>ê³µì§€</h1>
        <h2>ì´ìš© ì•ˆë‚´</h2>
        <p class="lead" style="margin-top:12px; margin-bottom:12px; color: var(--muted);">
        1ì¸ 1ë©”ë‰´ êµ¬ë§¤ í•„ìˆ˜ì…ë‹ˆë‹¤. (ë¯¸êµ¬ë§¤ì‹œ ì…ì¥ ì œí•œ)<br>
        ë™ì‹œê°„ëŒ€ ìˆ˜ìš© ì¸ì›ì´ ì •í•´ì ¸ ìˆìŠµë‹ˆë‹¤.<br>
        í˜¼ì¡í•  ê²½ìš° ì•¼ì™¸ ëŒ€ê¸°ê°€ ë°œìƒí•  ìˆ˜ ìˆìœ¼ë©°, ì¹´í˜ ì´ìš© ì‹œê°„ì„ ì œí•œí•©ë‹ˆë‹¤.<br>
        í‡´ì¥ì‹œ, ì¬ì…ì¥ì€ ë¶ˆê°€í•©ë‹ˆë‹¤. (ì¬ì…ì¥ì‹œ ìŒë£Œ êµ¬ë§¤ í•„ìˆ˜)<br>
        ìœ ë™ì ìœ¼ë¡œ ìš´ì˜ë  ìˆ˜ ìˆìœ¼ë©°, ë°”ë¡œ ê³µì§€í•©ë‹ˆë‹¤.<br>
        ì´ìŠˆ ë°œìƒì‹œ, ìƒì£¼í•˜ê³  ìˆëŠ” ìŠ¤íƒœí”„ì˜ ì§€ì‹œë¥¼ ë”°ë¼ì£¼ì„¸ìš”.<br>
        ë””í”¼ëœ ì˜¤ë¸Œì œëŠ” ì£¼ìµœì§„ë“¤ì˜ ì†Œì¤‘í•œ ìì‚°ì…ë‹ˆë‹¤.<br>
        ë°˜ë“œì‹œ ëˆˆìœ¼ë¡œë§Œ ë´ì£¼ì„¸ìš”. ì–‘í•´ ë¶€íƒë“œë¦½ë‹ˆë‹¤.<br>


        <h2>íŠ¹ì „ ì•ˆë‚´</h2>
        <p class="lead" style="margin-top:12px; margin-bottom:12px; color: var(--muted);">
        ì…ì¥ íŠ¹ì „ : 'ìŒë£Œ'ë§Œ êµ¬ë§¤<br>
        ëŸ­ë“œ íŠ¹ì „ : 'ìŒë£Œ + ì¿ í‚¤' êµ¬ë§¤<br><br>
        <h4>ë©”ë‰´íŒ</h4>
        <p class="lead" style="margin-top:-2px; margin-bottom:12px; color: var(--muted);">
        í‘ë°±ë™í™” (ì½œë“œë¸Œë£¨) 6,000ì›<br>
        ë‚´ ë°©ì•ˆì€ í‘¸ë¥¸ ë°”ë‹¤ (ë¸”ë£¨ë ˆëª¬ì—ì´ë“œ) 7,000ì›<br>
        ì˜ì›ì€ ê·¸ë ‡ë“¯ (ì²­í¬ë„ì—ì´ë“œ) 7,000ì›<br>
        ì´ˆì½” ì¿ í‚¤ 4,000ì›<br><br></p>

        <h2>ëŸ­í‚¤ë“œë¡œìš° ì•ˆë‚´</h2>
         <p class="lead" style="margin-top:12px; margin-bottom:12px; color: var(--muted);">
        ëŸ­í‚¤ë“œë¡œìš°ëŠ” 1ì¼ 25ê°œ íŒë§¤í•©ë‹ˆë‹¤.<br>
        ì¤€ë¹„ëœ ëŸ­í‚¤ë“œë¡œìš°ëŠ” ì¡°ê¸° ì†Œì§„ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
        ëŸ­ë“œ íŠ¹ì „ í’ˆì ˆì‹œ, ìŒë£Œ íŠ¹ì „ë§Œ êµ¬ë§¤ ê°€ëŠ¥í•©ë‹ˆë‹¤.<br>
        ì¶”ê°€ê¸ˆ ë°›ëŠ” ëŸ­í‚¤ë“œë¡œìš°ëŠ” ì œê³µ ì•ˆí•©ë‹ˆë‹¤.<br><p>

        <h3>ëŸ­ë“œ ìƒí’ˆ ìˆ˜ë ¹ ì•ˆë‚´(í•„ë…)</h3>
         <p class="lead" style="margin-top:-5px; margin-bottom:12px; color: var(--muted);">
        'ë‚´ ë°©ì•ˆì€ í‘¸ë¥¸ ë°”ë‹¤' íŒ¨ë¸Œë¦­ í¬ìŠ¤í„°<br>
        'ì˜ì›ì€ ê·¸ë ‡ë“¯' ì¹´ì„¸íŠ¸ í…Œì´í”„<br>
        'Wanna Be' CD<br>
        'ë‚´ ë°©ì•ˆì€ í‘¸ë¥¸ ë°”ë‹¤' CD<br>
        ìœ„ ìƒí’ˆ ìˆ˜ë ¹ìëŠ” ê°„ë‹¨í•œ ì„œì•½ì„œ(ê³„ì•½ì„œX) ì‘ì„±ì„ í•˜ê³ , ìƒí’ˆì„ ìˆ˜ë ¹í•©ë‹ˆë‹¤. (í”Œë¯¸ ì–‘ë„ ë°©ì§€ ëª©ì )<br>
        ìœ„ ìƒí’ˆë“¤ì€ í˜„ì¬ ì‹¬í•œ í”„ë¦¬ë¯¸ì—„ ê±°ë˜ê°€ ì´ë£¨ì–´ì§€ê³  ìˆëŠ” ìƒí’ˆë“¤ì…ë‹ˆë‹¤. ë”°ë¼ì„œ, ì§€ì†ì ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§ í•  ì˜ˆì •ì…ë‹ˆë‹¤.<br>
        ì–‘ë„ ëª©ì ì˜ ë°©ë¬¸ì´ë¼ë©´, ì •ë§ ì£„ì†¡í•˜ì§€ë§Œ ë°©ë¬¸ ì§€ì–‘í•´ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤.<br>
        ë‹¤ë¥¸ íŒ¬ë¶„ë“¤ê»˜ ê¸°íšŒë¥¼ ë“œë¦¬ê¸° ìœ„í•¨ìœ¼ë¡œ ì–‘í•´ë¶€íƒë“œë¦½ë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤. <br><p>
      </div>
    </section>
  </main>

  <!-- VIEW: Room - FAQ -->
  <main class="view" id="view-faq" data-view>
    <section class="room" aria-label="FAQ">
      <div class="fade">
        <h2>Q&A</h2>
        <p class="lead" style="margin-top:12px; color: var(--muted);">ì§ˆë¬¸ë“¤ì–´ì˜¬ ë•Œë§ˆë‹¤ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤. </p>
      </div>
    </section>
  </main>

  <footer>
    Â© REDOOR 5TH ANNIVERSARY<br>â€” House of Eternity
  </footer>

</div>

<div class="corridor" aria-label="ë³µë„ ë„¤ë¹„ê²Œì´ì…˜">
  <button id="backBtn" type="button" aria-label="ë’¤ë¡œ">â†</button>
  <div class="where" id="where">ì˜ì›ì˜ ì§‘</div>
  <button id="forwardBtn" type="button" aria-label="ì•ìœ¼ë¡œ">â†’</button>
</div>

<script>
(function(){
  'use strict';

  var views = {
    entrance: document.getElementById('view-entrance'),
    hall: document.getElementById('view-hall'),
    info: document.getElementById('view-info'),
    program: document.getElementById('view-program'),
    perks: document.getElementById('view-perks'),
    faq: document.getElementById('view-faq')
  };

  var flash = document.getElementById('flash');
  var whereEl = document.getElementById('where');
  var backBtn = document.getElementById('backBtn');
  var forwardBtn = document.getElementById('forwardBtn');

  function setActive(name){
    var k;
    for(k in views){
      if(Object.prototype.hasOwnProperty.call(views, k) && views[k]){
        views[k].classList.remove('is-active');
      }
    }
    if(views[name]) views[name].classList.add('is-active');

    if(whereEl){
      var map = { entrance:'ì…êµ¬', hall:'ì˜ì›ì˜ ì§‘', info:'ê¸°ë³¸ ì•ˆë‚´', program:'í”„ë¡œê·¸ë¨', perks:'ê³µì§€', faq:'Q&A' };
      whereEl.textContent = map[name] || 'ì˜ì›ì˜ ì§‘';
    }
  }

  function routeFromHash(hash){
    var h = (hash !== undefined && hash !== null ? hash : location.hash) || '#/';
    if(h === '#/' || h === '#') return 'entrance';
    if(h === '#/hall') return 'hall';
    if(h === '#/info') return 'info';
    if(h === '#/program') return 'program';
    if(h === '#/perks') return 'perks';
    if(h === '#/faq') return 'faq';
    return 'entrance';
  }

  function goto(hash){
    setActive(routeFromHash(hash));
    location.hash = hash;
    window.scrollTo(0, 0);
  }

  // Gate reset handler must be accessible from onRouteChange
  // (default no-op; replaced by gate module after it initializes)
  var resetGate = function(){};

  function onRouteChange(){
    var current = routeFromHash();
    setActive(current);
    window.scrollTo(0, 0);

    // When returning to entrance, ensure the gate is closed and clickable again
    if(current === 'entrance'){
      resetGate();
    }
  }

  // Gate open: ë°˜ë“œì‹œ "ì—´ë¦¬ëŠ” ëª¨ì…˜"ì„ ë³´ì—¬ì¤€ ë’¤ ë³µë„ë¡œ ì´ë™
  (function initGate(){
    var gateDoor = document.getElementById('gateDoor');
    if(!gateDoor) return;

    var opened = false;

    resetGate = function(){
      opened = false;
      document.body.classList.remove('gate-open');
    };

    function openGate(){
      if(opened) return;
      opened = true;

      // 1) Start door motion
      document.body.classList.add('gate-open');

      // 2) After the door has visibly started opening, flash + go to hall
      setTimeout(function(){
        if(flash){
          flash.classList.add('is-on');
          setTimeout(function(){ flash.classList.remove('is-on'); }, 120);
        }
        goto('#/hall');
      }, 520);
    }

    gateDoor.addEventListener('click', openGate);
    gateDoor.addEventListener('keydown', function(e){
      if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); openGate(); }
    });
  })();

  // Hall doors navigation
  function bindRoute(el){
    var r = el.getAttribute('data-route');
    if(!r) return;
    function activate(){ goto(r); }
    el.addEventListener('click', function(){ activate(); });
    el.addEventListener('keydown', function(e){
      if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); activate(); }
    });
  }

  // Program door toggle (open / close)
  function bindProgramDoor(el){
    var open = false;
    function toggleDoor(){
      open = !open;
      el.classList.toggle('is-open', open);
      el.setAttribute('aria-expanded', open ? 'true' : 'false');
    }
    el.addEventListener('click', function(){ toggleDoor(); });
    el.addEventListener('keydown', function(e){
      if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); toggleDoor(); }
    });
  }

  var routeNodes = document.querySelectorAll('[data-route]');
  for(var i=0;i<routeNodes.length;i++) bindRoute(routeNodes[i]);

  var programDoors = document.querySelectorAll('.program-door');
  for(var j=0;j<programDoors.length;j++) bindProgramDoor(programDoors[j]);

  // Corridor behavior
  if(backBtn) backBtn.addEventListener('click', function(){ history.back(); });
  if(forwardBtn) forwardBtn.addEventListener('click', function(){ history.forward(); });

  // Routing events
  window.addEventListener('hashchange', onRouteChange);
  window.addEventListener('popstate', onRouteChange);

  // Init route
  if(!location.hash){ location.hash = '#/'; }
  setActive(routeFromHash());

  // --- Minimal test cases (console) ---
  function assert(cond, msg){
    if(!cond) throw new Error('Test failed: ' + msg);
  }

  (function runTests(){
    try{
      assert(routeFromHash('#/') === 'entrance', 'routeFromHash entrance');
      assert(routeFromHash('#/hall') === 'hall', 'routeFromHash hall');
      assert(routeFromHash('#/info') === 'info', 'routeFromHash info');
      assert(routeFromHash('#/program') === 'program', 'routeFromHash program');
      assert(routeFromHash('#/perks') === 'perks', 'routeFromHash perks');
      assert(routeFromHash('#/faq') === 'faq', 'routeFromHash faq');

      var keys = ['entrance','hall','info','program','perks','faq'];
      for(var k=0; k<keys.length; k++){
        assert(!!views[keys[k]], 'view exists: ' + keys[k]);
      }

      // resetGate should exist and be callable
      assert(typeof resetGate === 'function', 'resetGate is a function');

      // goto uses hash and should not throw
      var before = location.hash;
      goto('#/hall');
      assert(location.hash === '#/hall', 'goto updates hash');
      location.hash = before;

      // Program doors should toggle class
      var pd = document.querySelector('.program-door');
      assert(!!pd, 'program door exists');
      var had = pd.classList.contains('is-open');
      pd.dispatchEvent(new MouseEvent('click', {bubbles:true, cancelable:true}));
      assert(pd.classList.contains('is-open') !== had, 'program door toggles');
      pd.dispatchEvent(new MouseEvent('click', {bubbles:true, cancelable:true}));

      console.log('[OK] tests passed');
    }catch(e){
      console.warn(e);
    }
  })();
})();
</script>

</body>
</html>

